<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Neural Network Forward Pass (p5.js)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <script defer src="nn.js"></script>
    <style>
      :root { --card: rgba(255,255,255,.84); --shadow: 0 10px 30px rgba(0,0,0,.12) }
      html,body{height:100%}
      body{
        margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Arial;
        background: radial-gradient(1200px 800px at 20% -10%, #f4f7ff 0%, #eef2ff 35%, #eaf2ef 65%, #ffffff 100%);
      }
      .stage{max-width:1280px; margin:0 auto; padding:24px 16px 120px;}
      canvas{ display:block; width:100%; height:auto; margin:0 auto; }

      /* fixed, centered HUD at the bottom */
      #hud{
        position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
        max-width:720px; width:calc(100% - 24px);  /* full-width on small screens */
        z-index:1000; background:#fff; padding:12px; border-radius:12px;
        box-shadow:0 10px 30px rgba(0,0,0,0.12);
        font-family:sans-serif; font-size:14px; box-sizing:border-box;
        cursor: default;          /* <-- was 'move'; set to default */
      }

      /* rows wrap nicely so sliders never overflow */
      .row{
        display:flex; flex-wrap:wrap; align-items:center; gap:10px; margin:8px 0;
      }

      /* labels are a bit narrower to make room for sliders */
      .row label{ min-width:96px; opacity:.8 }

      /* sliders are flexible but capped so they stay inside the card */
      .row input[type=range]{
        flex:1 1 160px;     /* grow/shrink; base width 160px */
        max-width:260px;    /* cap so it doesn't poke out */
      }

      /* small screens: give a little more room */
      @media (max-width: 640px){
        #hud{ bottom:12px; border-radius:10px; }
        .row label{ min-width:84px; }
        .row input[type=range]{ flex-basis:140px; max-width:200px; }
      }
      .pill{display:inline-block; padding:3px 8px; border-radius:999px; background:#f3f4f6; margin-left:6px}
      button{
        border-radius:10px; border:1px solid #ddd; padding:6px 10px; background:#fff; cursor:pointer;
        box-shadow:0 2px 8px rgba(0,0,0,.08)
      }
      .muted{opacity:.7}
    </style>
  </head>
  <body>
    <div class="stage" id="stage"></div>

  <div id="hud" aria-label="Controls" tabindex="0">
      <div class="row">
        <strong>NN Forward Pass</strong>
        <span class="muted" style="margin-left:auto">Press <b>S</b> to save</span>
      </div>

      <div class="row">
        <label for="hsize">Hidden size</label>
        <input id="hsize" type="range" min="2" max="10" value="3" />
        <span id="hval" class="pill">3</span>
      </div>

      <div class="row">
        <label for="act">Activation</label>
        <select id="act">
          <option value="relu">ReLU</option>
          <option value="tanh">tanh</option>
          <option value="sigmoid">sigmoid</option>
        </select>
        <label for="noise" style="min-width:auto">Noise</label>
        <input id="noise" type="range" min="0" max="100" value="0" />
        <span id="nval" class="pill">0</span>
      </div>

      <div class="row">
        <label for="heat">Show heatmap</label><input id="heat" type="checkbox" />
        <button id="reinit" style="margin-left:auto">Re-randomize Weights</button>
        <button id="save">Save PNG</button>
      </div>

      <div class="row">
        <span class="muted">Move your mouse inside the canvas — it’s the 2D input (x,y ∈ [0,1]). Edge thickness/opacity show contributions; node color/size show activations.</span>
      </div>
    </div>
    
  </body>
</html>
